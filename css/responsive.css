/* Mobile / overflow fixes for Refurnish Studio
   - global box-sizing
   - prevent horizontal scroll
   - make media elements responsive
   - clamp slider control positions to avoid pushing layout outside viewport
   - stack large cards on small screens
   - reduce large hero padding on small screens
*/

:root{
  --mobile-container-pad: 2rem; /* fallback for small screens */
}

/* Global */
*,
*::before,
*::after { box-sizing: border-box; }

html, body {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  /* prevent horizontal scroll caused by accidental overflow */
  overflow-x: hidden;
  min-width: 0; /* avoid long children forcing width on some browsers */
}

/* Make images / media respect container */
img, picture, svg, video, iframe {
  max-width: 100%;
  height: auto;
  display: block;
}

/* prevent long words / URLs from causing horizontal overflow */
body, p, h1, h2, h3, h4, h5, h6, .project-excerpt, .card-text {
  word-wrap: break-word;
  overflow-wrap: break-word;
  hyphens: auto;
}

/* Small-container padding safety */
.container, .container-fluid {
  padding-left: 1rem;
  padding-right: 1rem;
}

/* Hero vertical padding: reduce on small screens */
.parallax-hero > .container {
  /* keep behaviour consistent but avoid huge top padding on phones */
  padding-top: calc( (var(--container-pad, 6rem)) + 2rem );
  padding-bottom: var(--container-pad, 6rem);
}
@media (max-width: 992px) {
  .parallax-hero > .container {
    padding-top: calc(var(--mobile-container-pad) + 1rem);
    padding-bottom: calc(var(--mobile-container-pad) + 1rem);
  }
}

/* Slider: keep slider-panel within viewport and clamp prev/next positions */
.slider-panel {
  width: 100%;
  max-width: 100%;
  overflow: hidden;
  box-sizing: border-box;
}

/* position controls but clamp to safe min/max so they don't create horizontal scrollbar */
.slider-prev, .slider-next {
  /* allow the existing desktop calc to operate, but clamp to safe values */
  /* left/right will never push too far outside viewport */
  --control-offset: calc(50% - 520px);
}
.slider-prev { left: clamp(-40px, var(--control-offset), 12px); }
.slider-next { right: clamp(-40px, var(--control-offset), 12px); }

/* On small screens hide circular controls and rely on thumbnails / swipe */
@media (max-width: 768px) {
  .slider-prev, .slider-next { display: none; }
  .slider-stage { height: auto; min-height: 200px; }
  .slide img { object-fit: cover; }
}

/* Ensure stage images never exceed container width */
.slider-stage, .slider-stage .slide, .slide img { max-width:100%; }

/* Thumbs row scrolls horizontally but not overflow the page */
.slider-thumbs {
  padding: 6px 8px;
  margin-top: 14px;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}

/* Featured / blog card stacking on small screens */
.featured-card {
  display: flex;
  gap: 0;
  align-items: stretch;
  flex-direction: row;
}
@media (max-width: 768px) {
  .featured-card {
    flex-direction: column;
  }
  .featured-card img {
    width: 100%;
    height: auto;
    max-height: none;
  }
  .featured-card .card-body {
    padding: 1rem;
  }
}

/* Blog & portfolio cards: limit fixed heights that may create overflow */
.featured-card img, .blog-card img, .portfolio-card img {
  width: 100%;
  height: auto;
  max-height: 420px;
  object-fit: cover;
}

/* Project cards: make thumbnail flexible on small screens */
.project-thumb {
  width: 160px;
  height: 160px;
  flex: 0 0 160px;
}
@media (max-width: 576px) {
  .project-card { gap: 12px; }
  .project-thumb {
    width: 96px;
    height: 96px;
    flex: 0 0 96px;
  }
  .project-title { font-size: 1.05rem; }
  .project-excerpt { font-size: .92rem; }
}

/* Prevent off-canvas horizontal shift when category-nav buttons are many */
.category-nav {
  gap: .5rem;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  padding-bottom: 6px;
}

/* Make contact-map iframe responsive */
.contact-map iframe { width: 100%; max-width: 100%; height: 520px; }
@media (max-width: 992px) {
  .contact-map iframe { height: 360px; }
}

/* Small utility: ensure any element with fixed large width becomes fluid */
[style*="width: 980px"], [style*="max-width:980px"] {
  max-width: 100% !important;
}

/* Accessibility: keep focus outlines visible */
:focus { outline: 2px solid #0003; outline-offset: 2px; }

/* Final safety: if any element still overflows, hide x-axis (this prevents page scroll but not recommended as first line fix) */
@media (max-width: 420px) {
  html, body { overflow-x: hidden; }
}
